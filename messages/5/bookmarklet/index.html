<!DOCTYPE HTML>
<html>
	<head>
		<title>Vkontakte Stats</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<script type="text/javascript" src="http://yandex.st/jquery/1.4.4/jquery.min.js"></script>
	</head>
	<body>
		<div id="icon" style="position: fixed; left: 0; width: 100%; text-align: center; top: 200px;">
			<a href="javascript: (function(){var a=document.createElement('script');a.type='text/javascript';a.src='http://vkontakte-stats.googlecode.com/files/message-stats-core.js?'+Math.round((new Date).getTime()/60);document.getElementsByTagName('head')[0].appendChild(a)})();" onclick="alert('Drag this button to your browser\'s bookmarks toolbar or right-click it and choose Bookmark This Link.');return false;" title="vkontakte-stats"><img src="bookmarklet.gif" alt="vkontakte-stats" /></a>
		</div>

		<div id="link" style="position: fixed; left: 0; bottom: 10px; width: 100%; text-align: center;">
			<small><a href="http://vkontakte.ru/club21792535">http://vkontakte.ru/club21792535</a></small>
		</div>

		<div id="text" style="position: fixed; left: 10px; width: 100%; text-align: left; top: 10px;"></div>

		<script type="text/javascript">
			$(function () {
				$('#icon').css("top", window.innerHeight / 2 - 10);

				var BrowserDetect = {
					init: function () {
						this.browser = this.searchString(this.dataBrowser) || "An unknown browser";
						this.version = this.searchVersion(navigator.userAgent)
							|| this.searchVersion(navigator.appVersion)
							|| "an unknown version";
						this.OS = this.searchString(this.dataOS) || "an unknown OS";
					},
					searchString: function (data) {
						for (var i=0;i<data.length;i++)	{
							var dataString = data[i].string;
							var dataProp = data[i].prop;
							this.versionSearchString = data[i].versionSearch || data[i].identity;
							if (dataString) {
								if (dataString.indexOf(data[i].subString) != -1)
									return data[i].identity;
							}
							else if (dataProp)
								return data[i].identity;
						}
					},
					searchVersion: function (dataString) {
						var index = dataString.indexOf(this.versionSearchString);
						if (index == -1) return;
						return parseFloat(dataString.substring(index+this.versionSearchString.length+1));
					},
					dataBrowser: [
						{
							string: navigator.userAgent,
							subString: "Chrome",
							identity: "Chrome"
						},
						{
							string: navigator.userAgent,
							subString: "OmniWeb",
							versionSearch: "OmniWeb/",
							identity: "OmniWeb"
						},
						{
							string: navigator.vendor,
							subString: "Apple",
							identity: "Safari",
							versionSearch: "Version"
						},
						{
							prop: window.opera,
							identity: "Opera"
						},
						{
							string: navigator.vendor,
							subString: "iCab",
							identity: "iCab"
						},
						{
							string: navigator.vendor,
							subString: "KDE",
							identity: "Konqueror"
						},
						{
							string: navigator.userAgent,
							subString: "Firefox",
							identity: "Firefox"
						},
						{
							string: navigator.vendor,
							subString: "Camino",
							identity: "Camino"
						},
						{		// for newer Netscapes (6+)
							string: navigator.userAgent,
							subString: "Netscape",
							identity: "Netscape"
						},
						{
							string: navigator.userAgent,
							subString: "MSIE",
							identity: "Explorer",
							versionSearch: "MSIE"
						},
						{
							string: navigator.userAgent,
							subString: "Gecko",
							identity: "Mozilla",
							versionSearch: "rv"
						},
						{ 		// for older Netscapes (4-)
							string: navigator.userAgent,
							subString: "Mozilla",
							identity: "Netscape",
							versionSearch: "Mozilla"
						}
					],
					dataOS : [
						{
							string: navigator.platform,
							subString: "Win",
							identity: "Windows"
						},
						{
							string: navigator.platform,
							subString: "Mac",
							identity: "Mac"
						},
						{
							   string: navigator.userAgent,
							   subString: "iPhone",
							   identity: "iPhone/iPod"
						},
						{
							string: navigator.platform,
							subString: "Linux",
							identity: "Linux"
						}
					]

				};

				BrowserDetect.init();

				$('#text').html('browser: ' + BrowserDetect.browser + '; version: ' + BrowserDetect.version + '; OS: ' + BrowserDetect.OS);
			});
		</script>

<!-- Yandex.Metrika counter -->
<div style="display:none;"><script type="text/javascript">
(function(w, c) {
    (w[c] = w[c] || []).push(function() {
        try {
            w.yaCounter3154324 = new Ya.Metrika(3154324);
             yaCounter3154324.clickmap(true);
             yaCounter3154324.trackLinks(true);

        } catch(e) {}
    });
})(window, 'yandex_metrika_callbacks');
</script></div>
<script src="//mc.yandex.ru/metrika/watch.js" type="text/javascript" defer="defer"></script>
<noscript><div style="position:absolute"><img src="//mc.yandex.ru/watch/3154324" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->
	</body>
</html>
